{% extends "layout.html" %}
{% block body %}
{% if error %}<p class="text-warning"><strong>Warning:</strong> {{ error }}</p>{% endif %}

<div class="hero-unit">
<h1>User Metrics API</h1>
  <p class="margin-top:2em">Welcome to the Wikimedia Foundation's user metrics API homepage. This API allows you to select a set of users, also known as a user "cohort" <span class="muted">(for example, the list of <a href="{{url_for('all_cohorts')}}e2_moodbar">all users who shared their mood</a>)</span>, specify a metric to be computed for each of these users <span class="muted">(for example, their <a href="{{ url_for('all_metrics')}}revert_rate">7-day revert rate</a>)</span>, provide optional parameters <span class="muted">(for example, a <a href="#">registration time range</a>)</span> and retrieve the response in JSON format.</p><p>You can also retrieve an aggregate response for the entire cohort <span class="muted">(like its <a href="#">median revert rate</a>)</span.</p>
    <p class="margin-top:1em"><a class="btn btn-primary btn-large" href="/about/">Learn more</a></p>
</div>

<div class="row-fluid">
  <div class="span4">
    <h4>List of <a href="{{url_for('all_cohorts')}}">cohorts</a></h4>
        <form action="{{url_for('all_cohorts')}}" method="post" class="form-inline">
		<select name="selectCohort">
                {% for cohort in cohort_data %}
	  	<option value="{{cohort}}">{{cohort}}</option>
                {% endfor %}
            	</select>
		<input type="submit" value="Next" class="btn btn-primary" />
        </form>
  </div>
  <div class="span4">
    <h4>List of available <a href="{{url_for('all_metrics')}}">metrics</a></h4>
       <form action="{{url_for('all_metrics')}}" method="post" class="form-inline">
                <select name="selectMetric">
                <option value="threshold">threshold</option>
                <option value="survival">survival</option>
                <option value="edit_rate">edit rate</option>
                <option value="revert_rate">revert rate</option>
                <option value="bytes_added">bytes added</option>
                <option value="namespace_edits">namespace edits</option>
                <option value="time_to_threshold">time to threshold</option>
                <option value="blocks">blocks</option>
                </select>
                <input type="submit" value="Next" class="btn btn-primary" />
        </form>
  </div>
  <div class="span4">
    <h4>Additional parameters</h4>
          <ul>
                <li>Date start - date_start</li>
                <li>Date end - date_end</li>
                <li>Aggregator function - aggregator</li>
            </ul>
  </div>
</div>

<div class="embed_p">
    Choose a <a href="{{ url_for('all_cohorts') }}">Cohort</a>.<div class="v_space_sm"></div>
    Check the <a href="{{ url_for('job_queue') }}">Job Queue</a>.<div class="v_space_sm"></div>
    See all generated <a href="{{ url_for('all_urls') }}">requests</a>.<div class="v_space_sm"></div>
    View the <a href="{{ url_for('tags') }}">tag definitions</a> for cohorts.
</div>
{% endblock %}
