{% extends "layout.html" %}
{% block body %}
{% if error %}<p class="text-warning"><strong>Warning:</strong> {{ error }}</p>{% endif %}

<div class="hero-unit">
<h1>User Metrics API</h1>
  <p class="margin-top:2em">Welcome to the Wikimedia Foundation's user metrics API homepage. This API allows you to select a user cohort <span class="muted">(for example, the list of <a href="">Moodbar posters</a>)</span>, specify a metric to be computed for each of these users <span class="muted">(for example, their <a href="#">7-day revert rate</a>)</span>, provide optional parameters <span class="muted">(for example, a <a href="#">registration time range</a>)</span> and retrieve the response in JSON format.</p><p>You can also retrieve an aggregate response for the entire cohort <span class="muted">(like its <a href="#">median revert rate</a>)</span.</p>
    <p class="margin-top:1em"><a class="btn btn-primary btn-large" href="/about/">Learn more</a></p>
</div>

<div class="row-fluid">
  <div class="span4">
    <h4>List of cohorts</h4>
        <form action="/cohorts" method="get" class="form-inline">
		<select>
                {% for cohort in cohort_data %}
	  	<option value="{{cohort}}">{{cohort}}</option>
                {% endfor %}
            	</select>
		<input type="submit" value="Next" class="btn btn-primary" />
        </form>
  </div>
  <div class="span4">
    <h4>List of available <a href="https://meta.wikimedia.org/wiki/Research:Metrics">metrics</a></h4>
            <ul>
                <li>Threshold - threshold</li>
                <li>Revert Rate - revert_rate</li>
                <li>Bytes Added - bytes_added</li>
                <li>Survival - survival</li>
                <li>Edit Rate - edit_rate</li>
                <li>Time to Threshold - time_to_threshold</li>
                <li>Blocks - blocks</li>
            </ul>
  </div>
  <div class="span4">
    <h4>Additional parameters</h4>
          <ul>
                <li>Date start - date_start</li>
                <li>Date end - date_end</li>
                <li>Aggregator function - aggregator</li>
            </ul>
  </div>
</div>

<div class="embed_p">
    Choose a <a href="{{ url_for('all_cohorts') }}">Cohort</a>.<div class="v_space_sm"></div>
    Check the <a href="{{ url_for('job_queue') }}">Job Queue</a>.<div class="v_space_sm"></div>
    See all generated <a href="{{ url_for('all_urls') }}">requests</a>.<div class="v_space_sm"></div>
    View the <a href="{{ url_for('tags') }}">tag definitions</a> for cohorts.
</div>
{% endblock %}
